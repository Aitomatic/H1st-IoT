#!/usr/bin/env bash


CURRENT_DIR_PATH=$(pwd)


UTIL_REPO_URL=https://github.com/adatao/Util
UTIL_DIR_NAME=Util

SDK_REPO_URL=https://github.com/adatao/SDK
SDK_DIR_NAME=SDK

PRED_MAINT_DIR_NAME=PredMaint


git config --global credential.helper cache
git config --global credential.helper "cache --timeout=3600"


python3 -m pip install --upgrade pip --user


if [ ! -d $UTIL_DIR_NAME ]; then
  git clone $UTIL_REPO_URL
else
  cd $UTIL_DIR_NAME
  git pull
  cd $CURRENT_DIR_PATH
fi

cd $UTIL_DIR_NAME
python3 -m pip install -e . --upgrade --user --use-feature=2020-resolver
cd $CURRENT_DIR_PATH


if [ ! -d $SDK_DIR_NAME ]; then
  git clone $SDK_REPO_URL
else
  cd $SDK_DIR_NAME
  git pull
  cd $CURRENT_DIR_PATH
fi

cd $SDK_DIR_NAME
python3 -m pip install -e . --upgrade --user --use-feature=2020-resolver
cd $CURRENT_DIR_PATH


cd $PRED_MAINT_DIR_NAME
git pull
python3 -m pip install -e . --upgrade --user --use-feature=2020-resolver
cd $CURRENT_DIR_PATH
