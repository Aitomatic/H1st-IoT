#!/usr/bin/env bash


CURRENT_DIR_PATH=$(pwd)


UTIL_REPO_URL=https://github.com/adatao/Util
UTIL_DIR_NAME=Util

SDK_REPO_URL=https://github.com/adatao/SDK
SDK_DIR_NAME=SDK

PRED_MAINT_DIR_NAME=PredMaint


git config --global credential.helper cache
git config --global credential.helper "cache --timeout=36000"


python3 -m pip install pip --upgrade --user
python3 -m pip install Ruamel.YAML --upgrade --user


if [ ! -d $UTIL_DIR_NAME ]; then
  git clone $UTIL_REPO_URL
else
  cd $UTIL_DIR_NAME
  git pull
  cd $CURRENT_DIR_PATH
fi

python3 -m pip uninstall Arimo-Util --yes
python3 -m pip install -e $UTIL_DIR_NAME --upgrade --user


if [ ! -d $SDK_DIR_NAME ]; then
  git clone $SDK_REPO_URL
else
  cd $SDK_DIR_NAME
  git pull
  cd $CURRENT_DIR_PATH
fi

python3 -m pip uninstall Arimo-SDK --yes
python3 -m pip install -e $SDK_DIR_NAME --upgrade --user


cd $PRED_MAINT_DIR_NAME
git pull
cd $CURRENT_DIR_PATH

python3 -m pip uninstall Arimo-PredMaint --yes
python3 -m pip install -e $PRED_MAINT_DIR_NAME --upgrade --user
python3 -m pip install -r $PRED_MAINT_DIR_NAME/requirements.txt --upgrade --user
